<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì°½ì„¸ê¸° 1-2ì¥ íˆë¸Œë¦¬ì–´ ì–´ê·¼ ì •ë³µ v18</title>
<style>
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #0f2027, #2c5364); color: white; text-align: center; min-height: 100vh; padding: 20px; }
    #wordContainer { height: 220px; display: flex; justify-content: center; align-items: center; position: relative; margin-top: 20px; }
    #wordCanvas { font-size: 90px; direction: rtl; font-weight: bold; }
    input { padding: 15px; font-size: 18px; width: 320px; border-radius: 10px; border: none; text-align: center; }
    button { padding: 10px 20px; font-size: 16px; border-radius: 8px; border: none; margin: 5px; cursor: pointer; font-weight: bold; transition: 0.2s; }
    #checkBtn { background-color: #00d4ff; color: #00334e; }
    #reviewBtn { background-color: #ff3d00; color: white; display: none; }
    #feedback { margin-top: 15px; font-size: 19px; min-height: 100px; line-height: 1.5; }
    .speaker { cursor: pointer; font-size: 35px; margin-left: 15px; display:none; vertical-align: middle; }
    #wrongListContainer { margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 15px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto; }
    .wrong-item { display: inline-block; background: rgba(255,61,0,0.2); padding: 5px 12px; margin: 5px; border-radius: 20px; border: 1px solid #ff3d00; cursor: pointer; direction: rtl; font-size: 20px; }
    .correct::after { content: ""; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 140px; height: 140px; border: 10px solid #00ff88; border-radius: 50%; pointer-events: none; opacity: 0.7; }
    .wrong::after { content: "âœ•"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ff3d00; font-size: 160px; font-weight: 900; pointer-events: none; opacity: 0.7; }
</style>
</head>
<body>

<h2>Genesis 1-2 Root Master</h2>
<div id="modeIndicator" style="color: #ffeb3b; font-weight: bold;">[ ì „ì²´ í•™ìŠµ ëª¨ë“œ ]</div>

<div id="wordContainer">
    <div>
        <span id="wordCanvas"></span>
        <span id="speakerBtn" class="speaker">ğŸ”Š</span>
    </div>
</div>

<div>
    <input type="text" id="answerInput" placeholder="ì–´ê·¼ëª… ëœ» (ì˜ˆ: ë°”ë¼ ì°½ì¡°í•˜ë‹¤)" autocomplete="off">
    <button id="checkBtn" onclick="checkAnswer()">í™•ì¸</button>
</div>

<div id="feedback"></div>

<div id="wrongListContainer">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3 style="margin: 0;">âŒ ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸</h3>
        <button id="reviewBtn" onclick="startReviewMode()">ì˜¤ë‹µë§Œ ì—°ìŠµí•˜ê¸°</button>
    </div>
    <div id="wrongItems" style="margin-top: 10px;">í‹€ë¦° ë‹¨ì–´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
</div>

<script>
const allVerbs = [
    // --- ì°½ì„¸ê¸° 1ì¥ ë°ì´í„° ---
    {form:"×‘×¨×", root:"ë°”ë¼", meaning:["ì°½ì¡°í•˜ë‹¤"], gloss:"ê·¸ê°€ ì°½ì¡°í–ˆë‹¤", verse:"ì°½ 1:1"},
    {form:"×•×™×××¨", root:"ì•„ë§ˆë¥´", meaning:["ë§í•˜ë‹¤","ì´ë¥´ë‹¤"], gloss:"ê·¸ê°€ ë§í–ˆë‹¤", verse:"ì°½ 1:3"},
    {form:"×™×”×™", root:"í•˜ì•¼", meaning:["ìˆë‹¤","ë˜ë‹¤"], gloss:"ìˆê²Œ ë˜ë¼", verse:"ì°½ 1:3"},
    {form:"×•×™×¨×", root:"ë¼ì•„", meaning:["ë³´ë‹¤"], gloss:"ê·¸ê°€ ë³´ì•˜ë‹¤", verse:"ì°½ 1:4"},
    {form:"×•×™×‘×“×œ", root:"ë°”ë‹¬", meaning:["ë‚˜ëˆ„ë‹¤","êµ¬ë³„í•˜ë‹¤"], gloss:"ê·¸ê°€ ë‚˜ëˆ„ì…¨ë‹¤", verse:"ì°½ 1:4"},
    {form:"×•×™×§×¨×", root:"ì¹´ë¼", meaning:["ë¶€ë¥´ë‹¤","ì´ë¦„í•˜ë‹¤"], gloss:"ê·¸ê°€ ë¶ˆë €ë‹¤", verse:"ì°½ 1:5"},
    {form:"×•×™×¢×©", root:"ì•„ì‚¬", meaning:["ë§Œë“¤ë‹¤","í–‰í•˜ë‹¤"], gloss:"ê·¸ê°€ ë§Œë“¤ì—ˆë‹¤", verse:"ì°½ 1:7"},
    {form:"×•×™×ª×Ÿ", root:"ë‚˜íƒ„", meaning:["ì£¼ë‹¤","ë‘ë‹¤"], gloss:"ê·¸ê°€ ë‘ì—ˆë‹¤", verse:"ì°½ 1:17"},
    {form:"×•×™×‘×¨×š", root:"ë°”ë¼í¬", meaning:["ë³µì£¼ë‹¤","ì¶•ë³µí•˜ë‹¤"], gloss:"ê·¸ê°€ ì¶•ë³µí–ˆë‹¤", verse:"ì°½ 1:22"},
    {form:"×¤×¨×•", root:"íŒŒë¼", meaning:["ìƒìœ¡í•˜ë‹¤","ë²ˆì„±í•˜ë‹¤"], gloss:"ìƒìœ¡í•˜ë¼", verse:"ì°½ 1:22"},
    {form:"×¨×‘×•", root:"ë¼ë°”", meaning:["ë§ì•„ì§€ë‹¤","ë²ˆì„±í•˜ë‹¤"], gloss:"ë²ˆì„±í•˜ë¼", verse:"ì°½ 1:22"},
    {form:"×›×‘×©×”", root:"ì¹´ë°”ì‰¬", meaning:["ì •ë³µí•˜ë‹¤"], gloss:"ì •ë³µí•˜ë¼", verse:"ì°½ 1:28"},


    // --- ì°½ì„¸ê¸° 2ì¥ í•µì‹¬ ì–´ê·¼ 12ê°œ & íŒŒìƒí˜• ---
    // 1. ì¹¼ë¼ (ì™„ì„±í•˜ë‹¤)
    {form:"×•×™×›×œ×•", root:"ì¹¼ë¼", meaning:["ë§ˆì¹˜ë‹¤","ì™„ì„±í•˜ë‹¤"], gloss:"ê·¸ë“¤ì´ ì™„ì„±ë˜ì—ˆë‹¤", verse:"ì°½ 2:1"},
    {form:"×•×™×›×œ", root:"ì¹¼ë¼", meaning:["ë§ˆì¹˜ë‹¤","ì™„ì„±í•˜ë‹¤"], gloss:"ê·¸ê°€ ë§ˆì¹˜ì…¨ë‹¤", verse:"ì°½ 2:2"},
    {form:"×›×œ×”", root:"ì¹¼ë¼", meaning:["ë§ˆì¹˜ë‹¤"], gloss:"ê·¸ê°€ ëëƒˆë‹¤", verse:"íŒŒìƒ"},
    {form:"×œ×›×œ×•×ª", root:"ì¹¼ë¼", meaning:["ë§ˆì¹˜ë‹¤"], gloss:"ë§ˆì¹˜ê¸° ìœ„í•˜ì—¬", verse:"íŒŒìƒ"},
    {form:"×™×›×œ×•", root:"ì¹¼ë¼", meaning:["ë§ˆì¹˜ë‹¤"], gloss:"ê·¸ë“¤ì´ ë§ˆì¹  ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},

    // 2. ìƒ¤ë°”íŠ¸ (ì‰¬ë‹¤)
    {form:"×•×™×©×‘×ª", root:"ìƒ¤ë°”íŠ¸", meaning:["ì‰¬ë‹¤","ê·¸ì¹˜ë‹¤"], gloss:"ê·¸ê°€ ì‰¬ì…¨ë‹¤", verse:"ì°½ 2:2"},
    {form:"×©×‘×ª", root:"ìƒ¤ë°”íŠ¸", meaning:["ì‰¬ë‹¤"], gloss:"ê·¸ê°€ ì‰¬ì—ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"×©×•×‘×ª", root:"ìƒ¤ë°”íŠ¸", meaning:["ì‰¬ë‹¤"], gloss:"ì‰¬ëŠ” ì", verse:"íŒŒìƒ"},
    {form:"×œ×©×‘×•×ª", root:"ìƒ¤ë°”íŠ¸", meaning:["ì‰¬ë‹¤"], gloss:"ì‰¬ëŠ” ê²ƒ", verse:"íŒŒìƒ"},
    {form:"× ×©×‘×•×ª", root:"ìƒ¤ë°”íŠ¸", meaning:["ì‰¬ë‹¤"], gloss:"ìš°ë¦¬ê°€ ì‰´ ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},

    // 3. ì¹´ë‹¤ì‰¬ (ê±°ë£©í•˜ë‹¤)
    {form:"×•×™×§×“×©", root:"ì¹´ë‹¤ì‰¬", meaning:["ê±°ë£©í•˜ë‹¤"], gloss:"ê·¸ê°€ ê±°ë£©í•˜ê²Œ í•˜ì…¨ë‹¤", verse:"ì°½ 2:3"},
    {form:"×§×“×©", root:"ì¹´ë‹¤ì‰¬", meaning:["ê±°ë£©í•˜ë‹¤"], gloss:"ê±°ë£©í•¨", verse:"íŒŒìƒ"},
    {form:"××§×“×©", root:"ì¹´ë‹¤ì‰¬", meaning:["ê±°ë£©í•˜ë‹¤"], gloss:"ì„±ì†Œ", verse:"íŒŒìƒ"},
    {form:"×§×“×©×•", root:"ì¹´ë‹¤ì‰¬", meaning:["ê±°ë£©í•˜ë‹¤"], gloss:"ê·¸ë“¤ì´ ê±°ë£©í•˜ê²Œ í–ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"×™×§×“×©", root:"ì¹´ë‹¤ì‰¬", meaning:["ê±°ë£©í•˜ë‹¤"], gloss:"ê·¸ê°€ ê±°ë£©í•˜ê²Œ ë  ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},

    // 4. ì°¨ë§ˆí (ì‹¹ë‚˜ë‹¤)
    {form:"×™×¦××—", root:"ì°¨ë§ˆí", meaning:["ì‹¹ë‚˜ë‹¤"], gloss:"ê·¸ê²ƒì´ ìë„ ê²ƒì´ë‹¤", verse:"ì°½ 2:5"},
    {form:"×•×™×¦××—", root:"ì°¨ë§ˆí", meaning:["ì‹¹ë‚˜ë‹¤"], gloss:"ê·¸ê°€ ìë¼ê²Œ í•˜ì…¨ë‹¤", verse:"ì°½ 2:9"},
    {form:"×¦××—", root:"ì°¨ë§ˆí", meaning:["ì‹¹ë‚˜ë‹¤"], gloss:"ì‹¹(ëª…ì‚¬)", verse:"íŒŒìƒ"},
    {form:"×¦××—×”", root:"ì°¨ë§ˆí", meaning:["ì‹¹ë‚˜ë‹¤"], gloss:"ê·¸ë…€ê°€ ìëë‹¤", verse:"íŒŒìƒ"},
    {form:"××¦××™×—", root:"ì°¨ë§ˆí", meaning:["ì‹¹ë‚˜ë‹¤"], gloss:"ìë¼ê²Œ í•˜ëŠ” ë¶„", verse:"íŒŒìƒ"},

    // 5. ì•¼ì°¨ë¥´ (ë¹šë‹¤)
    {form:"×•×™×™×¦×¨", root:"ì•¼ì°¨ë¥´", meaning:["ë¹šë‹¤"], gloss:"ê·¸ê°€ ë¹šìœ¼ì…¨ë‹¤", verse:"ì°½ 2:7"},
    {form:"× ×•×¦×¨", root:"ì•¼ì°¨ë¥´", meaning:["ë¹šë‹¤"], gloss:"ê·¸ê°€ í˜•ì„±ë˜ì—ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"×™×¦×¨×•", root:"ì•¼ì°¨ë¥´", meaning:["ë¹šë‹¤"], gloss:"ê·¸ë“¤ì´ ë¹šì—ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"×™×•×¦×¨", root:"ì•¼ì°¨ë¥´", meaning:["ë¹šë‹¤"], gloss:"í† ê¸°ì¥ì´", verse:"íŒŒìƒ"},
    {form:"×ª×¦×¨", root:"ì•¼ì°¨ë¥´", meaning:["ë¹šë‹¤"], gloss:"ë„¤ê°€ ë¹šì„ ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},


    // 6. ë‚˜íƒ€ (ì‹¬ë‹¤)
    {form:"×•×™×˜×¢", root:"ë‚˜íƒ€", meaning:["ì‹¬ë‹¤"], gloss:"ê·¸ê°€ ì‹¬ìœ¼ì…¨ë‹¤", verse:"ì°½ 2:8"},
    {form:"× ×˜×¢", root:"ë‚˜íƒ€", meaning:["ì‹¬ë‹¤"], gloss:"ê·¸ê°€ ì‹¬ì—ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"× ×˜×•×¢", root:"ë‚˜íƒ€", meaning:["ì‹¬ë‹¤"], gloss:"ì‹¬ê²¨ì§„", verse:"íŒŒìƒ"},
    {form:"×œ× ×˜×•×¢", root:"ë‚˜íƒ€", meaning:["ì‹¬ë‹¤"], gloss:"ì‹¬ê¸° ìœ„í•˜ì—¬", verse:"íŒŒìƒ"},
    {form:"×™×˜×¢×•", root:"ë‚˜íƒ€", meaning:["ì‹¬ë‹¤"], gloss:"ê·¸ë“¤ì´ ì‹¬ì„ ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},

    // 7. íŒŒë¼ë“œ (ë‚˜ëˆ„ì´ë‹¤ / 'ë“œ' ìˆ˜ì •ì™„ë£Œ)
    {form:"×™×¤×¨×“", root:"íŒŒë¼ë“œ", meaning:["ë‚˜ëˆ„ì´ë‹¤"], gloss:"ê·¸ê²ƒì´ ê°ˆë¼ì¡Œë‹¤", verse:"ì°½ 2:10"},
    {form:"× ×¤×¨×“×•", root:"íŒŒë¼ë“œ", meaning:["ë‚˜ëˆ„ì´ë‹¤"], gloss:"ê·¸ë“¤ì´ ë‚˜ëˆ„ì–´ì¡Œë‹¤", verse:"íŒŒìƒ"},
    {form:"×”×¤×¨×™×“", root:"íŒŒë¼ë“œ", meaning:["ë‚˜ëˆ„ì´ë‹¤"], gloss:"ê·¸ê°€ ë¶„ë¦¬ì‹œì¼°ë‹¤", verse:"íŒŒìƒ"},
    {form:"×¤×¨×“", root:"íŒŒë¼ë“œ", meaning:["ë‚˜ëˆ„ì´ë‹¤"], gloss:"ê·¸ê°€ ë‚˜ëˆ„ì—ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"××¤×¨×™×“", root:"íŒŒë¼ë“œ", meaning:["ë‚˜ëˆ„ì´ë‹¤"], gloss:"ë‚˜ëˆ„ëŠ” ì", verse:"íŒŒìƒ"},

     // 8. ëˆ„ì•„í (ë‘ë‹¤, ì•ˆì‹í•˜ë‹¤)
    {form:"×•×™× ×—×”×•", root:"ëˆ„ì•„í", meaning:["ë‘ë‹¤"], gloss:"ê·¸ë¥¼ ê·¸ê³³ì— ë‘ì…¨ë‹¤", verse:"ì°½ 2:15"},
    {form:"×”× ×™×—", root:"ëˆ„ì•„í", meaning:["ë‘ë‹¤"], gloss:"ê·¸ê°€ ë‘ì—ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"×™× ×™×—", root:"ëˆ„ì•„í", meaning:["ì•ˆì‹í•˜ë‹¤"], gloss:"ê·¸ê°€ ì‰´ ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},
    {form:"× ×•×—", root:"ëˆ„ì•„í", meaning:["ì•ˆì‹í•˜ë‹¤"], gloss:"ë…¸ì•„(ì•ˆì‹)", verse:"íŒŒìƒ"},
    {form:"×× ×•×—×”", root:"ëˆ„ì•„í", meaning:["ì•ˆì‹í•˜ë‹¤"], gloss:"ì•ˆì‹ì²˜", verse:"íŒŒìƒ"},


    // 9. ìƒ¤ë§ˆë¥´ (ì§€í‚¤ë‹¤)
    {form:"×•×œ×©××¨×”", root:"ìƒ¤ë§ˆë¥´", meaning:["ì§€í‚¤ë‹¤"], gloss:"ê·¸ê²ƒì„ ì§€í‚¤ê²Œ í•˜ë ¤", verse:"ì°½ 2:15"},
    {form:"×©××¨", root:"ìƒ¤ë§ˆë¥´", meaning:["ì§€í‚¤ë‹¤"], gloss:"ê·¸ê°€ ì§€ì¼°ë‹¤", verse:"íŒŒìƒ"},
    {form:"×©×•××¨", root:"ìƒ¤ë§ˆë¥´", meaning:["ì§€í‚¤ë‹¤"], gloss:"íŒŒìˆ˜ê¾¼", verse:"íŒŒìƒ"},
    {form:"× ×©××¨", root:"ìƒ¤ë§ˆë¥´", meaning:["ì§€í‚¤ë‹¤"], gloss:"ì£¼ì˜í•˜ë‹¤", verse:"íŒŒìƒ"},
    {form:"××©××•×¨", root:"ìƒ¤ë§ˆë¥´", meaning:["ì§€í‚¤ë‹¤"], gloss:"ë‚´ê°€ ì§€í‚¬ ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},

    // 10. ì°¨ì™€ (ëª…ë ¹í•˜ë‹¤)
    {form:"×•×™×¦×•", root:"ì°¨ì™€", meaning:["ëª…ë ¹í•˜ë‹¤"], gloss:"ê·¸ê°€ ëª…ë ¹í•˜ì…¨ë‹¤", verse:"ì°½ 2:16"},
    {form:"×¦×•×”", root:"ì°¨ì™€", meaning:["ëª…ë ¹í•˜ë‹¤"], gloss:"ê·¸ê°€ ëª…ë ¹í–ˆë‹¤", verse:"íŒŒìƒ"},
    {form:"××¦×•×”", root:"ì°¨ì™€", meaning:["ëª…ë ¹í•˜ë‹¤"], gloss:"ê³„ëª…", verse:"íŒŒìƒ"},
    {form:"××¦×•×•×”", root:"ì°¨ì™€", meaning:["ëª…ë ¹í•˜ë‹¤"], gloss:"ëª…ë ¹ë°›ì€ ì", verse:"íŒŒìƒ"},
    {form:"×œ×¦×•×•×ª", root:"ì°¨ì™€", meaning:["ëª…ë ¹í•˜ë‹¤"], gloss:"ëª…ë ¹í•˜ê¸° ìœ„í•˜ì—¬", verse:"íŒŒìƒ"},

    // 11. ì•„ìë¥´ (ë•ë‹¤)
    {form:"×¢×–×¨", root:"ì•„ìë¥´", meaning:["ë•ë‹¤"], gloss:"ë•ëŠ” ë°°í•„", verse:"ì°½ 2:18"},
    {form:"×¢×–×¨×ª×™", root:"ì•„ìë¥´", meaning:["ë•ë‹¤"], gloss:"ë‚´ê°€ ë„ì™”ë‹¤", verse:"íŒŒìƒ"},
    {form:"×™×¢×–×•×¨", root:"ì•„ìë¥´", meaning:["ë•ë‹¤"], gloss:"ê·¸ê°€ ë„ìš¸ ê²ƒì´ë‹¤", verse:"íŒŒìƒ"},
    {form:"× ×¢×–×¨", root:"ì•„ìë¥´", meaning:["ë•ë‹¤"], gloss:"ë„ì›€ì„ ë°›ë‹¤", verse:"íŒŒìƒ"},
    {form:"×¢×•×–×¨", root:"ì•„ìë¥´", meaning:["ë•ë‹¤"], gloss:"ì¡°ë ¥ì", verse:"íŒŒìƒ"},

    // 12. ì•„ìë¸Œ (ë– ë‚˜ë‹¤)
    {form:"×™×¢×–ë¸Œ", root:"ì•„ìë¸Œ", meaning:["ë– ë‚˜ë‹¤"], gloss:"ê·¸ê°€ ë– ë‚  ê²ƒì´ë‹¤", verse:"ì°½ 2:24"},
    {form:"×¢×–×‘", root:"ì•„ìë¸Œ", meaning:["ë– ë‚˜ë‹¤"], gloss:"ê·¸ê°€ ë– ë‚¬ë‹¤", verse:"íŒŒìƒ"},
    {form:"×¢×–×‘×•", root:"ì•„ìë¸Œ", meaning:["ë– ë‚˜ë‹¤"], gloss:"ê·¸ë“¤ì´ ë– ë‚¬ë‹¤", verse:"íŒŒìƒ"},
    {form:"×œ×¢×–×•×‘", root:"ì•„ìë¸Œ", meaning:["ë– ë‚˜ë‹¤"], gloss:"ë– ë‚˜ëŠ” ê²ƒ", verse:"íŒŒìƒ"},
    {form:"× ×¢×–×‘", root:"ì•„ìë¸Œ", meaning:["ë– ë‚˜ë‹¤"], gloss:"ë²„ë ¤ì§€ë‹¤", verse:"íŒŒìƒ"}
];

let currentVerbs = [...allVerbs];
let wrongAnswers = [];
let current, timer=null, isReviewMode = false;

const canvas=document.getElementById("wordCanvas"), input=document.getElementById("answerInput"), feedback=document.getElementById("feedback"), speakerBtn=document.getElementById("speakerBtn"), wrongItemsDiv=document.getElementById("wrongItems"), reviewBtn=document.getElementById("reviewBtn"), modeInd=document.getElementById("modeIndicator");

function normalize(t){return t.trim().replace(/\s+/g,"");}

function newQuestion(){
    if(currentVerbs.length === 0) {
        feedback.innerHTML = isReviewMode ? "ì˜¤ë‹µ ë³µìŠµ ì™„ë£Œ!" : "í•™ìŠµ ì™„ë£Œ!";
        if(isReviewMode) endReviewMode();
        return;
    }
    speakerBtn.style.display="none"; canvas.className = "";
    current=currentVerbs[Math.floor(Math.random()*currentVerbs.length)];
    canvas.innerText=current.form; feedback.innerHTML=""; input.value=""; input.focus();
}

function checkAnswer(){
    if(timer) clearTimeout(timer);
    const p = input.value.trim().split(/\s+/);
    const rootOk = normalize(p[0]||"") == normalize(current.root);
    const meaningOk = current.meaning.some(m => normalize(m) == normalize(p.slice(1).join("")));
    const isCorrect = rootOk && meaningOk;

    canvas.className = isCorrect ? "correct" : "wrong";
    if(!isCorrect) { addWrongList(current); } 
    else if (isReviewMode) { currentVerbs = currentVerbs.filter(v => v.form !== current.form); }

    feedback.innerHTML = `<b style="color:${isCorrect?'#00ff88':'#ff3d00'}">${isCorrect?'ì •ë‹µ!':'ì˜¤ë‹µ!'}</b><br>ì–´ê·¼: ${current.root} (${current.meaning.join(", ")})<br>ëœ»: ${current.gloss}`;
    speakerBtn.style.display="inline";
    playTTS(current.form);
    timer = setTimeout(newQuestion, isCorrect?3000:6000);
}

function addWrongList(item) {
    if(!wrongAnswers.find(v => v.form === item.form)) {
        wrongAnswers.push(item);
        updateWrongDisplay();
    }
}

function updateWrongDisplay() {
    if(wrongAnswers.length === 0) {
        wrongItemsDiv.innerText = "í‹€ë¦° ë‹¨ì–´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.";
        reviewBtn.style.display = "none";
    } else {
        wrongItemsDiv.innerHTML = wrongAnswers.map(v => `<span class="wrong-item">${v.form}</span>`).join("");
        reviewBtn.style.display = "inline-block";
    }
}

function startReviewMode() {
    if(wrongAnswers.length === 0) return;
    isReviewMode = true; currentVerbs = [...wrongAnswers];
    modeInd.innerText = "[ ì˜¤ë‹µ ë³µìŠµ ëª¨ë“œ ]"; modeInd.style.color = "#ff3d00";
    newQuestion();
}

function endReviewMode() {
    isReviewMode = false; currentVerbs = [...allVerbs];
    modeInd.innerText = "[ ì „ì²´ í•™ìŠµ ëª¨ë“œ ]"; modeInd.style.color = "#ffeb3b";
    newQuestion();
}

function playTTS(text){
    const url = "https://translate.googleapis.com"+encodeURIComponent(text)+"&tl=he&client=tw-ob";
    new Audio(url).play().catch(()=>{});
}

input.addEventListener("keypress",e=>{if(e.key==="Enter")checkAnswer();});
newQuestion();
</script>
</body>
</html>
