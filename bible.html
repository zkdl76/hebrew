<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bible</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --gap:14px;
      --border:#e5e5e5;
      --muted:#666;
      --on:#0b5;
      --playing:#08f;
    }

    html{
      font-size:18px;
    }

    body{
      margin:0;
      padding:18px;
      font-family:"Nanum Gothic", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#fff;
      color:#111;
    }

    /* ===== font size control ===== */
    #fontSizeControl{
      position:fixed;
      top:10px;
      right:14px;
      z-index:3000;
      background:#fff;
      border:1px solid var(--border);
      border-radius:999px;
      padding:6px 10px;
      box-shadow:0 6px 18px rgba(0,0,0,.15);
      font-size:13px;
    }

    #fontSizeSelect{
      font-size:13px;
      padding:2px 6px;
    }

    .wrap{max-width:980px; margin:0 auto;}
    .verse{border:1px solid var(--border); border-radius:14px; padding:14px; margin:0 0 var(--gap) 0;}
    .ref{font-weight:700; margin:0 0 8px 0;}
    h1.he{
      margin:0 0 10px 0;
      font-size:2rem;
      line-height:1.25;
      direction:rtl;
      unicode-bidi:plaintext;
      text-align:left;
      font-family:"SBL Hebrew","Ezra SIL SR","Times New Roman",serif;
    }
    .kor{margin:0 0 10px 0; font-size:1rem; color:#111;}
    .btnrow{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    button{border:1px solid var(--border); background:#f7f7f7; padding:9px 12px; border-radius:12px; cursor:pointer; font-weight:700;}
    button:hover{background:#f0f0f0;}
    button.playing{border-color:var(--playing); color:var(--playing); background:#eef6ff;}
    button.repeatOn{border-color:var(--on); color:var(--on); background:#eafff3;}

    .topbar{
      position: sticky;
      top: 8px;
      z-index: 999;
      background: #fff;
      padding: 10px 0;
      margin: 0 0 14px 0;
      border-bottom: 1px solid var(--border);
    }

    .navcenter{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      font-size:0.85rem;
      color:var(--muted);
    }

    .navcenter select{
      padding:8px 10px;
      border:1px solid var(--border);
      border-radius:12px;
      background:#fff;
      font-weight:700;
      font-size:0.9rem;
    }

    .w{cursor:pointer; padding:0 2px; border-radius:6px;}
    .w:hover{background:#f3f6ff;}

    .modalBg{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:2000;
    }
    .modalBg.on{display:flex;}

    .modal{
      width:min(1000px, 90vw);
      height:60vh;
      background:#fff;
      border:1px solid var(--border);
      border-radius:20px;
      box-shadow:0 20px 50px rgba(0,0,0,.25);
      padding:40px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
    }

    .modalTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
    }

    .closeBtn{
      border:1px solid var(--border);
      background:#f7f7f7;
      padding:8px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
    }

    .wordHead{
      margin:20px 0;
      font-size:clamp(4rem, 9vw, 8rem);
      line-height:1.1;
      direction:rtl;
      unicode-bidi:plaintext;
      text-align:center;
      font-family:"SBL Hebrew","Ezra SIL SR","Times New Roman",serif;
    }

  </style>
</head>
<body>

<div id="fontSizeControl">
  글자 크기
  <select id="fontSizeSelect"></select>
</div>

<div class="wrap">
  <div class="topbar">
    <div class="navcenter">
      <select id="bookSelect"></select>
      <select id="chapterSelect"></select>
      <span>장</span>
      <button id="prevVerseBtn">&lt;</button>
      <select id="verseSelect"></select>
      <span>절</span>
      <button id="nextVerseBtn">&gt;</button>
    </div>
  </div>

  <div id="error" style="display:none;"></div>
  <div id="verses"></div>
</div>

<script>
/* ===== font size system ===== */
const fontSizeSelect = document.getElementById("fontSizeSelect");
const sizes = [14,16,18,20,22,24,26,28,32,36,40];

function applyFontSize(px){
  document.documentElement.style.fontSize = px + "px";
  localStorage.setItem("bibleFontSize", px);
}

(function initFontSize(){
  const saved = parseInt(localStorage.getItem("bibleFontSize")) || 18;
  sizes.forEach(s=>{
    const opt=document.createElement("option");
    opt.value=s;
    opt.textContent=s+"px";
    if(s===saved) opt.selected=true;
    fontSizeSelect.appendChild(opt);
  });
  applyFontSize(saved);
})();

fontSizeSelect.addEventListener("change", e=>{
  applyFontSize(parseInt(e.target.value));
});
</script>

</body>
</html>
